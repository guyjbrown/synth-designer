@synth juno
longname: Juno 106
author: Guy Brown
version: 1.0
doc: Rough simulation of Juno 106 synth
@end

# parameter

@param lfo_rate
type: float
step: 0.01
min: 0.1
max: 30
default: 5
doc : LFO rate
@end

@param lfo_delay
type: float
step: 0.01
min: 0
max: 3
default: 0
doc : LFO delay
@end

@param pulse_on_off
type: int
step: 1
min: 0
max: 1
default: 1
doc : whether the pulse oscillator is on or off
@end

@param saw_on_off
type: int
step: 1
min: 0
max: 1
default: 1
doc : whether the saw oscillator is on or off
@end

@param sub
type: float
step: 0.01
min: 0
max: 10
default: 10
doc: level of the sub-oscillator
@end

@param noise
type: float
step: 0.01
min: 0
max: 10
default: 10
doc: level of the noise oscillator
@end

@param hpf_freq
type: float
step: 0.01
min: 0
max: 3
default: 0
doc: cutoff of the high pass filter
@end

@param lpf_freq
type: float
step: 0.01
min: 0
max: 10
default: 6
doc: cutoff of the low pass filter
@end

@param res
type: float
step: 0.01
min: 0
max: 10
default: 0
doc: resonance of the low pass filter
@end

# oscillators

SAW-OSC : saw
PULSE-OSC : pulse
SQR-OSC : sub
NOISE : noise

TRI-OSC : lfo

VCA : mix
VCA : subgain
VCA : noisegain
VCA : pulsegain
VCA : sawgain
HPF : highpass
LPF : lowpass
LPF : noisefilter
VCA : vca

# patch the oscillator section

saw.out -> sawgain.in
sawgain.out -> mix.in

pulse.out -> pulsegain.in
pulsegain.out -> mix.in

noise.out -> noisefilter.in
noisefilter.out -> noisegain.in
noisegain.out -> mix.in
sub.out -> subgain.in
subgain.out -> mix.in

# patch the filters

mix.out -> highpass.in
highpass.out -> lowpass.in
lowpass.out -> vca.in

# output

vca.out -> audio.in

# noise filter

noisefilter.cutoff = 2630
noisefilter.resonance = 5

# oscillator controls

pulsegain.level = param.pulse_on_off
sawgain.level = param.saw_on_off

# LFO

lfo.pitch = param.lfo_rate

# tweaks

saw.pitch = param.pitch
pulse.pitch = param.pitch
sub.pitch = param.pitch
sub.detune = -1200
noisegain.level = map(param.noise,0,0.1)
subgain.level = map(param.sub,0,1)

highpass.resonance = 0
highpass.cutoff = exp(param.hpf_freq)*149
lowpass.resonance = map(param.res,0,20)
lowpass.cutoff = exp(param.lpf_freq)*0.45
mix.level = 0.4

# end of file
